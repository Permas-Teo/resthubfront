{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nimport { API_HOST } from '../../consts';\nimport { loadState, removeState, saveState } from '../localStorage';\nconst MATCH_STATE_KEY = 'match';\nconst persistedMatch = loadState(MATCH_STATE_KEY);\nexport const matchSlice = createSlice({\n  name: 'match',\n  initialState: persistedMatch,\n  reducers: {\n    setMatch: (state, action) => action.payload\n  }\n});\nexport const {\n  setMatch\n} = matchSlice.actions;\nexport const getMatch = email => dispatch => {\n  const apiUrl = `${API_HOST}/match/get?email=${email}`; // console.log(apiUrl);\n\n  fetch(apiUrl, {\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    method: 'GET'\n  }).then(response => response.json()).then(result => {\n    console.log(result);\n\n    if (result.status === true) {\n      saveState(MATCH_STATE_KEY, result);\n      dispatch(setMatch(result));\n      return True;\n    } else if (result.status === false) {\n      return False;\n    } else {\n      throw new Error(result.message);\n    }\n  }).catch(err => console.log(err));\n};\nexport const endMatch = () => dispatch => {\n  removeState(MATCH_STATE_KEY);\n  dispatch(setMatch(null));\n};\nexport const selectMatch = state => state.match;\nexport default matchSlice.reducer;","map":{"version":3,"sources":["/home/permas/cs3219-ay2021-s1-project-2020-s1-g23/frontend/src/redux/slices/matchSlice.js"],"names":["createSlice","API_HOST","loadState","removeState","saveState","MATCH_STATE_KEY","persistedMatch","matchSlice","name","initialState","reducers","setMatch","state","action","payload","actions","getMatch","email","dispatch","apiUrl","fetch","headers","method","then","response","json","result","console","log","status","True","False","Error","message","catch","err","endMatch","selectMatch","match","reducer"],"mappings":"AAAA,SAASA,WAAT,QAA4B,kBAA5B;AACA,SAASC,QAAT,QAAyB,cAAzB;AACA,SAASC,SAAT,EAAoBC,WAApB,EAAiCC,SAAjC,QAAkD,iBAAlD;AAEA,MAAMC,eAAe,GAAG,OAAxB;AACA,MAAMC,cAAc,GAAGJ,SAAS,CAACG,eAAD,CAAhC;AAEA,OAAO,MAAME,UAAU,GAAGP,WAAW,CAAC;AACpCQ,EAAAA,IAAI,EAAE,OAD8B;AAEpCC,EAAAA,YAAY,EAAEH,cAFsB;AAGpCI,EAAAA,QAAQ,EAAE;AACRC,IAAAA,QAAQ,EAAE,CAACC,KAAD,EAAQC,MAAR,KAAmBA,MAAM,CAACC;AAD5B;AAH0B,CAAD,CAA9B;AAQP,OAAO,MAAM;AAAEH,EAAAA;AAAF,IAAeJ,UAAU,CAACQ,OAAhC;AAEP,OAAO,MAAMC,QAAQ,GAAIC,KAAD,IAAYC,QAAD,IAAc;AAC/C,QAAMC,MAAM,GAAI,GAAElB,QAAS,oBAAmBgB,KAAM,EAApD,CAD+C,CAE/C;;AACAG,EAAAA,KAAK,CAACD,MAAD,EAAS;AACZE,IAAAA,OAAO,EAAE;AACP,sBAAgB;AADT,KADG;AAIZC,IAAAA,MAAM,EAAE;AAJI,GAAT,CAAL,CAMGC,IANH,CAMSC,QAAD,IAAcA,QAAQ,CAACC,IAAT,EANtB,EAOGF,IAPH,CAOSG,MAAD,IAAY;AAChBC,IAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ;;AACA,QAAIA,MAAM,CAACG,MAAP,KAAkB,IAAtB,EAA6B;AAC3BzB,MAAAA,SAAS,CAACC,eAAD,EAAkBqB,MAAlB,CAAT;AACAR,MAAAA,QAAQ,CAACP,QAAQ,CAACe,MAAD,CAAT,CAAR;AACA,aAAOI,IAAP;AACD,KAJD,MAIO,IAAIJ,MAAM,CAACG,MAAP,KAAkB,KAAtB,EAA6B;AAClC,aAAOE,KAAP;AACD,KAFM,MAEA;AACL,YAAM,IAAIC,KAAJ,CAAUN,MAAM,CAACO,OAAjB,CAAN;AACD;AACF,GAlBH,EAmBGC,KAnBH,CAmBUC,GAAD,IAASR,OAAO,CAACC,GAAR,CAAYO,GAAZ,CAnBlB;AAoBD,CAvBM;AAyBP,OAAO,MAAMC,QAAQ,GAAG,MAAOlB,QAAD,IAAc;AAC1Cf,EAAAA,WAAW,CAACE,eAAD,CAAX;AACAa,EAAAA,QAAQ,CAACP,QAAQ,CAAC,IAAD,CAAT,CAAR;AACD,CAHM;AAKP,OAAO,MAAM0B,WAAW,GAAIzB,KAAD,IAAWA,KAAK,CAAC0B,KAArC;AAEP,eAAe/B,UAAU,CAACgC,OAA1B","sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\nimport { API_HOST } from '../../consts';\nimport { loadState, removeState, saveState } from '../localStorage';\n\nconst MATCH_STATE_KEY = 'match';\nconst persistedMatch = loadState(MATCH_STATE_KEY);\n\nexport const matchSlice = createSlice({\n  name: 'match',\n  initialState: persistedMatch,\n  reducers: {\n    setMatch: (state, action) => action.payload,\n  },\n});\n\nexport const { setMatch } = matchSlice.actions;\n\nexport const getMatch = (email) => (dispatch) => {\n  const apiUrl = `${API_HOST}/match/get?email=${email}`;\n  // console.log(apiUrl);\n  fetch(apiUrl, {\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    method: 'GET',\n  })\n    .then((response) => response.json())\n    .then((result) => {\n      console.log(result);\n      if (result.status === true ) {\n        saveState(MATCH_STATE_KEY, result);\n        dispatch(setMatch(result));\n        return True;\n      } else if (result.status === false) {\n        return False;\n      } else {\n        throw new Error(result.message);\n      }\n    })\n    .catch((err) => console.log(err));\n};\n\nexport const endMatch = () => (dispatch) => {\n  removeState(MATCH_STATE_KEY);\n  dispatch(setMatch(null));\n};\n\nexport const selectMatch = (state) => state.match;\n\nexport default matchSlice.reducer;\n"]},"metadata":{},"sourceType":"module"}