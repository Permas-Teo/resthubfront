{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nimport { API_HOST } from '../../consts';\nimport { loadState, removeState, saveState } from '../localStorage';\nconst MATCH_STATE_KEY = 'match';\nconst persistedMatch = loadState(MATCH_STATE_KEY);\nexport const matchSlice = createSlice({\n  name: 'match',\n  initialState: persistedMatch,\n  reducers: {\n    setMatch: (state, action) => action.payload\n  }\n});\nexport const {\n  setMatch\n} = matchSlice.actions;\nexport const getMatch = email => dispatch => {\n  const api_url = `${API_HOST}/match/get?email=${email}`;\n  console.log(api_url);\n  fetch(api_url, {\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    method: 'GET'\n  }).then(response => response.json()).then(result => {\n    console.log(result);\n\n    if (result.status === true || result.status === false) {\n      saveState(MATCH_STATE_KEY, result);\n      dispatch(setMatch(result));\n    } else {\n      throw new Error(result.message);\n    }\n  }).catch(err => alert(err));\n};\nexport const endMatch = () => dispatch => {\n  removeState(MATCH_STATE_KEY);\n  dispatch(setMatch(null));\n};\nexport const selectMatch = state => state.match;\nexport default matchSlice.reducer;","map":{"version":3,"sources":["/home/permas/cs3219-ay2021-s1-project-2020-s1-g23/frontend/src/redux/slices/matchSlice.js"],"names":["createSlice","API_HOST","loadState","removeState","saveState","MATCH_STATE_KEY","persistedMatch","matchSlice","name","initialState","reducers","setMatch","state","action","payload","actions","getMatch","email","dispatch","api_url","console","log","fetch","headers","method","then","response","json","result","status","Error","message","catch","err","alert","endMatch","selectMatch","match","reducer"],"mappings":"AAAA,SAASA,WAAT,QAA4B,kBAA5B;AACA,SAASC,QAAT,QAAyB,cAAzB;AACA,SAASC,SAAT,EAAoBC,WAApB,EAAiCC,SAAjC,QAAkD,iBAAlD;AAEA,MAAMC,eAAe,GAAG,OAAxB;AACA,MAAMC,cAAc,GAAGJ,SAAS,CAACG,eAAD,CAAhC;AAEA,OAAO,MAAME,UAAU,GAAGP,WAAW,CAAC;AACpCQ,EAAAA,IAAI,EAAE,OAD8B;AAEpCC,EAAAA,YAAY,EAAEH,cAFsB;AAGpCI,EAAAA,QAAQ,EAAE;AACRC,IAAAA,QAAQ,EAAE,CAACC,KAAD,EAAQC,MAAR,KAAmBA,MAAM,CAACC;AAD5B;AAH0B,CAAD,CAA9B;AAQP,OAAO,MAAM;AAAEH,EAAAA;AAAF,IAAeJ,UAAU,CAACQ,OAAhC;AAEP,OAAO,MAAMC,QAAQ,GAAIC,KAAD,IAAYC,QAAD,IAAc;AAC7C,QAAMC,OAAO,GAAI,GAAElB,QAAS,oBAAmBgB,KAAM,EAArD;AACAG,EAAAA,OAAO,CAACC,GAAR,CAAYF,OAAZ;AACAG,EAAAA,KAAK,CAACH,OAAD,EAAU;AACbI,IAAAA,OAAO,EAAE;AACP,sBAAgB;AADT,KADI;AAIbC,IAAAA,MAAM,EAAE;AAJK,GAAV,CAAL,CAMGC,IANH,CAMSC,QAAD,IAAcA,QAAQ,CAACC,IAAT,EANtB,EAOGF,IAPH,CAOSG,MAAD,IAAY;AAChBR,IAAAA,OAAO,CAACC,GAAR,CAAYO,MAAZ;;AACA,QAAIA,MAAM,CAACC,MAAP,KAAkB,IAAlB,IAA0BD,MAAM,CAACC,MAAP,KAAkB,KAAhD,EAAuD;AACrDzB,MAAAA,SAAS,CAACC,eAAD,EAAkBuB,MAAlB,CAAT;AACAV,MAAAA,QAAQ,CAACP,QAAQ,CAACiB,MAAD,CAAT,CAAR;AACD,KAHD,MAGO;AACL,YAAM,IAAIE,KAAJ,CAAUF,MAAM,CAACG,OAAjB,CAAN;AACD;AACF,GAfH,EAgBGC,KAhBH,CAgBUC,GAAD,IAASC,KAAK,CAACD,GAAD,CAhBvB;AAiBD,CApBI;AAsBP,OAAO,MAAME,QAAQ,GAAG,MAAOjB,QAAD,IAAc;AAC1Cf,EAAAA,WAAW,CAACE,eAAD,CAAX;AACAa,EAAAA,QAAQ,CAACP,QAAQ,CAAC,IAAD,CAAT,CAAR;AACD,CAHM;AAKP,OAAO,MAAMyB,WAAW,GAAIxB,KAAD,IAAWA,KAAK,CAACyB,KAArC;AAEP,eAAe9B,UAAU,CAAC+B,OAA1B","sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\nimport { API_HOST } from '../../consts';\nimport { loadState, removeState, saveState } from '../localStorage';\n\nconst MATCH_STATE_KEY = 'match';\nconst persistedMatch = loadState(MATCH_STATE_KEY);\n\nexport const matchSlice = createSlice({\n  name: 'match',\n  initialState: persistedMatch,\n  reducers: {\n    setMatch: (state, action) => action.payload,\n  },\n});\n\nexport const { setMatch } = matchSlice.actions;\n\nexport const getMatch = (email) => (dispatch) => {\n    const api_url = `${API_HOST}/match/get?email=${email}`;\n    console.log(api_url);\n    fetch(api_url, {\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      method: 'GET',\n    })\n      .then((response) => response.json())\n      .then((result) => {\n        console.log(result);\n        if (result.status === true || result.status === false) {\n          saveState(MATCH_STATE_KEY, result); \n          dispatch(setMatch(result));\n        } else {\n          throw new Error(result.message);\n        }\n      })\n      .catch((err) => alert(err));\n  };\n\nexport const endMatch = () => (dispatch) => {\n  removeState(MATCH_STATE_KEY);\n  dispatch(setMatch(null));\n};\n\nexport const selectMatch = (state) => state.match;\n\nexport default matchSlice.reducer;\n"]},"metadata":{},"sourceType":"module"}