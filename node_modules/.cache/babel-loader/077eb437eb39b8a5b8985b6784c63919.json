{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nimport { API_HOST } from '../../consts';\nimport { loadState, removeState, saveState } from '../localStorage';\nconst CONTACT_STATE_KEY = 'contact';\nconst persistedContact = loadState(CONTACT_STATE_KEY);\nexport const contactSlice = createSlice({\n  name: 'contact',\n  initialState: persistedContact,\n  reducers: {\n    setContact: (state, action) => action.payload\n  }\n});\nexport const {\n  setContact\n} = contactSlice.actions;\nexport const getContact = name => dispatch => {\n  const apiUrl = `${API_HOST}/api/contacts/${name}`;\n  fetch(apiUrl, {\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    method: 'GET'\n  }).then(response => response.json()).then(result => {\n    dispatch(clearContact);\n    saveState(CONTACT_STATE_KEY, result.data);\n    dispatch(setContact(result.data));\n    console.log(result.data);\n  }).catch(err => console.log(err));\n};\nexport const clearContact = () => dispatch => {\n  removeState(CONTACT_STATE_KEY);\n  dispatch(setContact(null));\n};\nexport const signupContact = (email, password, nickname) => dispatch => {\n  fetch(`${API_HOST}/contact/contact`, {\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    method: 'POST',\n    body: JSON.stringify({\n      email,\n      password,\n      nickname\n    })\n  }).then(response => response.json()).then(result => {\n    if (result.status === 'success') {\n      saveState(CONTACT_STATE_KEY, result.data);\n      dispatch(setContact(result.data));\n    } else {\n      throw new Error(result.message);\n    }\n  }).catch(err => console.log(err));\n};\nexport const selectContact = state => state.contact;\nexport default contactSlice.reducer;","map":{"version":3,"sources":["/home/permas/resthub/frontend/src/redux/slices/contactSlice.js"],"names":["createSlice","API_HOST","loadState","removeState","saveState","CONTACT_STATE_KEY","persistedContact","contactSlice","name","initialState","reducers","setContact","state","action","payload","actions","getContact","dispatch","apiUrl","fetch","headers","method","then","response","json","result","clearContact","data","console","log","catch","err","signupContact","email","password","nickname","body","JSON","stringify","status","Error","message","selectContact","contact","reducer"],"mappings":"AAAA,SAASA,WAAT,QAA4B,kBAA5B;AACA,SAASC,QAAT,QAAyB,cAAzB;AACA,SAASC,SAAT,EAAoBC,WAApB,EAAiCC,SAAjC,QAAkD,iBAAlD;AAEA,MAAMC,iBAAiB,GAAG,SAA1B;AACA,MAAMC,gBAAgB,GAAGJ,SAAS,CAACG,iBAAD,CAAlC;AAEA,OAAO,MAAME,YAAY,GAAGP,WAAW,CAAC;AACtCQ,EAAAA,IAAI,EAAE,SADgC;AAEtCC,EAAAA,YAAY,EAAEH,gBAFwB;AAGtCI,EAAAA,QAAQ,EAAE;AACRC,IAAAA,UAAU,EAAE,CAACC,KAAD,EAAQC,MAAR,KAAmBA,MAAM,CAACC;AAD9B;AAH4B,CAAD,CAAhC;AAQP,OAAO,MAAM;AAAEH,EAAAA;AAAF,IAAiBJ,YAAY,CAACQ,OAApC;AAEP,OAAO,MAAMC,UAAU,GAAIR,IAAD,IAAWS,QAAD,IAAc;AAChD,QAAMC,MAAM,GAAI,GAAEjB,QAAS,iBAAgBO,IAAK,EAAhD;AACAW,EAAAA,KAAK,CAACD,MAAD,EAAS;AACZE,IAAAA,OAAO,EAAE;AACP,sBAAgB;AADT,KADG;AAIZC,IAAAA,MAAM,EAAE;AAJI,GAAT,CAAL,CAMGC,IANH,CAMSC,QAAD,IAAcA,QAAQ,CAACC,IAAT,EANtB,EAOGF,IAPH,CAOSG,MAAD,IAAY;AAChBR,IAAAA,QAAQ,CAACS,YAAD,CAAR;AACAtB,IAAAA,SAAS,CAACC,iBAAD,EAAoBoB,MAAM,CAACE,IAA3B,CAAT;AACAV,IAAAA,QAAQ,CAACN,UAAU,CAACc,MAAM,CAACE,IAAR,CAAX,CAAR;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYJ,MAAM,CAACE,IAAnB;AACD,GAZH,EAaGG,KAbH,CAaUC,GAAD,IAASH,OAAO,CAACC,GAAR,CAAYE,GAAZ,CAblB;AAcD,CAhBM;AAkBP,OAAO,MAAML,YAAY,GAAG,MAAOT,QAAD,IAAc;AAC9Cd,EAAAA,WAAW,CAACE,iBAAD,CAAX;AACAY,EAAAA,QAAQ,CAACN,UAAU,CAAC,IAAD,CAAX,CAAR;AACD,CAHM;AAKP,OAAO,MAAMqB,aAAa,GAAG,CAACC,KAAD,EAAQC,QAAR,EAAkBC,QAAlB,KAAgClB,QAAD,IAAc;AACxEE,EAAAA,KAAK,CAAE,GAAElB,QAAS,kBAAb,EAAgC;AACnCmB,IAAAA,OAAO,EAAE;AACP,sBAAgB;AADT,KAD0B;AAInCC,IAAAA,MAAM,EAAE,MAJ2B;AAKnCe,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAEL,MAAAA,KAAF;AAASC,MAAAA,QAAT;AAAmBC,MAAAA;AAAnB,KAAf;AAL6B,GAAhC,CAAL,CAOGb,IAPH,CAOSC,QAAD,IAAcA,QAAQ,CAACC,IAAT,EAPtB,EAQGF,IARH,CAQSG,MAAD,IAAY;AAChB,QAAIA,MAAM,CAACc,MAAP,KAAkB,SAAtB,EAAiC;AAC/BnC,MAAAA,SAAS,CAACC,iBAAD,EAAoBoB,MAAM,CAACE,IAA3B,CAAT;AACAV,MAAAA,QAAQ,CAACN,UAAU,CAACc,MAAM,CAACE,IAAR,CAAX,CAAR;AACD,KAHD,MAGO;AACL,YAAM,IAAIa,KAAJ,CAAUf,MAAM,CAACgB,OAAjB,CAAN;AACD;AACF,GAfH,EAgBGX,KAhBH,CAgBUC,GAAD,IAASH,OAAO,CAACC,GAAR,CAAYE,GAAZ,CAhBlB;AAiBD,CAlBM;AAoBP,OAAO,MAAMW,aAAa,GAAI9B,KAAD,IAAWA,KAAK,CAAC+B,OAAvC;AAEP,eAAepC,YAAY,CAACqC,OAA5B","sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\nimport { API_HOST } from '../../consts';\nimport { loadState, removeState, saveState } from '../localStorage';\n\nconst CONTACT_STATE_KEY = 'contact';\nconst persistedContact = loadState(CONTACT_STATE_KEY);\n\nexport const contactSlice = createSlice({\n  name: 'contact',\n  initialState: persistedContact,\n  reducers: {\n    setContact: (state, action) => action.payload,\n  },\n});\n\nexport const { setContact } = contactSlice.actions;\n\nexport const getContact = (name) => (dispatch) => {\n  const apiUrl = `${API_HOST}/api/contacts/${name}`; \n  fetch(apiUrl, {\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    method: 'GET',\n  })\n    .then((response) => response.json())\n    .then((result) => {\n      dispatch(clearContact);\n      saveState(CONTACT_STATE_KEY, result.data);\n      dispatch(setContact(result.data));\n      console.log(result.data);\n    })\n    .catch((err) => console.log(err));\n};\n\nexport const clearContact = () => (dispatch) => {\n  removeState(CONTACT_STATE_KEY);\n  dispatch(setContact(null));\n};\n\nexport const signupContact = (email, password, nickname) => (dispatch) => {\n  fetch(`${API_HOST}/contact/contact`, {\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    method: 'POST',\n    body: JSON.stringify({ email, password, nickname }),\n  })\n    .then((response) => response.json())\n    .then((result) => {\n      if (result.status === 'success') {\n        saveState(CONTACT_STATE_KEY, result.data);\n        dispatch(setContact(result.data));\n      } else {\n        throw new Error(result.message);\n      }\n    })\n    .catch((err) => console.log(err));\n};\n\nexport const selectContact = (state) => state.contact;\n\nexport default contactSlice.reducer;\n"]},"metadata":{},"sourceType":"module"}